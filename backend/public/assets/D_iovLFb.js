import{y as w,u as S,d as v,b as d,a0 as F,e as E,Q as b,j as e,N as A,c as o,a as u,f as L,D as q,l as P,L as T}from"./B7DAq_4k.js";import{e as C}from"./hUW0gmcn.js";import{u as M,t as h}from"./CoSjDuvE.js";import{s}from"./C9q1ODpn.js";function _(){const x=M(),[n,g]=w(),{appLanguage:p,permissions:f}=S(),t=v("page.exams"),m=d.useRef(),j=F.localeData().longDateFormat("L").replace(/D[\\/\-\\.]?/g,"").trim(),N=()=>{const a=n.get("year"),r=n.get("month");return r&&a?new Date(Number(a),Number(r)-1):new Date},l=d.useCallback(()=>{x(),m.current=requestAnimationFrame(l)},[x]),y=a=>{const r=new Date(a.examDate),c=D=>o(s.badge,s[D]);return a.cancelledAt!=null?e.jsx("div",{className:c("red"),children:t==null?void 0:t.cancelled}):h.isTimeWithinOneHour(r)?e.jsx("div",{className:c("yellow"),children:h.countDown(r)}):a.startedAt==null&&new Date().getTime()>r.getTime()?e.jsx("div",{className:c("yellow"),children:t==null?void 0:t.pendingStart}):a.startedAt!=null&&h.isOnTimeExam(new Date(a.startedAt),a.examTime)?e.jsx("div",{className:c("green"),children:t==null?void 0:t.inProgress}):r.toLocaleString(p.language)},i=E({queryKey:[b.PAGE_EXAMS,{month:n.get("month")||"",year:n.get("year")||""}],queryFn:()=>C({month:n.get("month")||"",year:n.get("year")||""}),enabled:f.has("exam_view")});return d.useEffect(()=>{if(i.data)return m.current=requestAnimationFrame(l),()=>cancelAnimationFrame(m.current)},[l,i.data]),f.has("exam_view")?e.jsx(e.Fragment,{children:e.jsxs("main",{className:o(u["dashboard-d"]),children:[i.isLoading?e.jsx(L,{}):null,e.jsx("section",{className:s["filter-form"],children:e.jsxs("div",{className:s["wrap-input-item"],children:[e.jsx("label",{htmlFor:"month",children:t==null?void 0:t.month}),e.jsx(q,{renderMonth:P,locale:p.language,initialValue:N(),inputProps:{id:"month",name:"month",className:o(u["input-d"],s["input-item"])},onChange:a=>{const r=new Date(a.toString());n.set("month",String(r.getMonth()+1)),n.set("year",String(r.getFullYear())),g(n)},closeOnSelect:!0,dateFormat:j,timeFormat:!1})]})}),e.jsx("section",{className:s["wrap-card-container"],children:e.jsx("div",{className:s["card-container"],children:i.data?i.data.map(a=>e.jsxs(T,{to:String(a.id),className:o(u["dashboard-card-d"],s.card),children:[e.jsx("div",{className:s["card-section"],children:e.jsx("p",{className:s.content,children:a.name})}),e.jsx("div",{className:s["card-section"],children:y(a)}),e.jsx("div",{className:s["card-section"],children:a.course.subject.name})]},`exam-${a.id}`)):null})})]})}):e.jsx(A,{to:"/"})}export{_ as default};
