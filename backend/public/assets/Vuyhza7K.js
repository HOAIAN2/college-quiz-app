import{u as P,b as N,i as A,V as M,d as Q,O as U,e as G,Q as u,k as L,j as e,N as C,c as d,a as i,f as S,D as E,M as K,L as Y,n as R}from"./B7DAq_4k.js";import{c as V,d as k,e as O}from"./D3wkX606.js";import{Y as T}from"./BQMOT6f8.js";const I="uFHQX8vBdX0-",J="CiaDqTrEcco-",Z="-TLDG1aMQaM-",z="_8qJ-pVGjSB4-",B="hr89Z6-YdgM-",s={"page-content":"i-ZCKnd4UGo-",header:I,title:J,"form-content":"JGP2zgALbsk-","form-data":"udkRNQ985uQ-","group-inputs":"N-5IzPDbJZw-","wrap-item":"JeZmvX-f-K4-",required:Z,"input-item":"K60bjL-l0uc-",error:z,"custom-select":"q7CW9jtGEzA-","action-items":"EACxCA--G4Q-",pending:B};function $(){const{permissions:r}=P(),[b,p]=N.useState(!1),l=A(),v=M(),t=Q("page.semester"),{id:o}=U(),m=R(s),c=!r.has("semester_update"),n=G({queryKey:[u.PAGE_SEMESTER,{id:o}],queryFn:()=>V(String(o)),enabled:r.has("semester_view")}),y=async a=>{var x;a.preventDefault(),(x=document.querySelector(`.${s["form-data"]}`))==null||x.querySelectorAll("input[name]").forEach(j=>{var f;j.classList.remove("error"),(f=m.getParentElement(j))==null||f.removeAttribute("data-error")});const q=a.target,F=new FormData(q);await O(F,String(o))},{mutate:D,isPending:h}=L({mutationFn:y,onError:a=>{m.showFormError(a)}}),_=async()=>{await k(String(o))},w=()=>{[u.PAGE_SEMESTERS].forEach(a=>{l.refetchQueries({queryKey:[a]})}),v("/semesters")};return N.useEffect(()=>()=>{l.removeQueries({queryKey:[u.PAGE_SEMESTER,{id:o}]})},[o,l]),r.has("semester_view")?e.jsxs(e.Fragment,{children:[b===!0?e.jsx(T,{message:(t==null?void 0:t.deleteMessage)||"",mutateFunction:_,setShowPopUp:p,onMutateSuccess:w,langYes:t==null?void 0:t.langYes,langNo:t==null?void 0:t.langNo}):null,e.jsxs("main",{className:d(i["dashboard-d"],s["page-content"]),children:[n.isLoading?e.jsx(S,{}):null,h?e.jsx(S,{}):null,n.data?e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:s["form-content"],children:[e.jsx("div",{className:s.header,children:e.jsx("h2",{className:s.title,children:n.data.name})}),e.jsxs("form",{onSubmit:a=>{D(a)},onInput:a=>{m.handleOnInput(a)},className:s["form-data"],children:[e.jsx("input",{name:"is_active",defaultValue:"1",hidden:!0}),e.jsxs("div",{className:s["group-inputs"],children:[e.jsxs("div",{className:s["wrap-item"],children:[e.jsx("label",{className:s.required,htmlFor:"name",children:t==null?void 0:t.name}),e.jsx("input",{id:"name",name:"name",disabled:c,defaultValue:n.data.name,className:d(i["input-d"],s["input-item"]),type:"text"})]}),e.jsxs("div",{className:s["wrap-item"],children:[e.jsx("label",{className:s.required,htmlFor:"start_date",children:t==null?void 0:t.startDate}),e.jsx(E,{initialValue:new Date(n.data.startDate),inputProps:{id:"start_date",name:"start_date",className:d(i["input-d"],s["input-item"]),disabled:c},closeOnSelect:!0,timeFormat:!1})]}),e.jsxs("div",{className:s["wrap-item"],children:[e.jsx("label",{className:s.required,htmlFor:"end_date",children:t==null?void 0:t.endDate}),e.jsx(E,{initialValue:new Date(n.data.endDate),inputProps:{id:"end_date",name:"end_date",className:d(i["input-d"],s["input-item"]),disabled:c},closeOnSelect:!0,timeFormat:!1})]})]}),r.hasAnyFormList(["semester_update","semester_delete"])?e.jsxs("div",{className:s["action-items"],children:[r.has("semester_update")?e.jsx("button",{name:"save",className:d(i["action-item-d"],h?i["button-submitting"]:""),children:t==null?void 0:t.save}):null,r.has("semester_delete")?e.jsxs("button",{type:"button",onClick:()=>{p(!0)},className:i["action-item-white-border-red-d"],children:[e.jsx(K,{}),t==null?void 0:t.delete]}):null]}):null]})]}),r.has("course_view")?e.jsx(Y,{to:"courses",state:n.data,className:s.header,children:e.jsx("h2",{className:s.title,children:t==null?void 0:t.courses})}):null]}):null]})]}):e.jsx(C,{to:"/"})}export{$ as default};
