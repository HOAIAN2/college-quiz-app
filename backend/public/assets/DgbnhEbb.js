import{u as j,d as N,O as P,e as v,Q as y,k as E,b as p,j as e,N as S,c as F,a as d,f as w,F as R}from"./B7DAq_4k.js";import{b as L,c as M}from"./B_rRojuf.js";const r={"role-permission-container":"zwhqBZFMprw-","permission-container":"cpMC-W5lfYY-","permission-list":"Ep-nPXoblZM-","permission-item":"i8LyQi-Qlts-","action-items":"xCWma483l3o-"};function C(){const{permissions:i,appLanguage:u,appTitle:m}=j(),n=N("page.role_permissions"),{id:t}=P(),h=!i.has("role_permission_grant"),a=v({queryKey:[y.PAGE_ROLE_PERMISSIONS,{id:t}],queryFn:()=>L(Number(t)),enabled:i.has("role_permission_view")}),f=async s=>{s.preventDefault();const c=s.target,o=new FormData(c),l=[];o.forEach(g=>{l.push(g.toString())}),t&&await M(t,l)},x=s=>{var o;return!!((o=a.data)==null?void 0:o.role.permissions.find(l=>l.name===s))},{mutate:_,isPending:b}=E({mutationFn:f,onSuccess:()=>{a.refetch()}});return p.useEffect(()=>{a.data&&n&&m.setAppTitle(n[a.data.role.name+"Permissions"])},[m,n,a.data]),p.useEffect(()=>{i.has("role_permission_view")&&a.refetch()},[i,u.language]),i.has("role_permission_view")?e.jsxs("div",{className:F(d["dashboard-d"],r["role-permission-container"]),children:[a.isFetching||b?e.jsx(w,{}):null,a.data?e.jsxs("form",{onSubmit:s=>{_(s)},className:r["permission-container"],children:[e.jsx("ul",{className:r["permission-list"],children:a.data.appPermissions.map(s=>e.jsxs("li",{className:r["permission-item"],children:[e.jsx("input",{id:s.name,type:"checkbox",name:"ids[]",value:s.id,disabled:h,defaultChecked:x(s.name)}),e.jsx("label",{htmlFor:s.name,className:r.label,children:s.displayName})]},`'permission-${s.id}`))}),i.has("role_permission_grant")?e.jsx("div",{className:r["action-items"],children:e.jsxs("button",{name:"save",className:d["action-item-d"],children:[e.jsx(R,{}),n==null?void 0:n.save]})}):null]}):null]}):e.jsx(S,{to:"/"})}export{C as default};
